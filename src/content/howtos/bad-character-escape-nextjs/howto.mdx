---
title: "How to Solve “Module parse failed: Bad character escape sequence”"
slug: bad-character-escape-nextjs
heading: Fixing Module Parse Errors Caused by Bad Escape Sequences in Next.js
icon: /icons/javascript.png
image: ./images/bad-character-escape-nextjs.png
permalink: howto/bad-character-escape-nextjs
date: 2024-10-28
author: anton liberant
category: nextjs
type: howto
tags: ['nextjs', 'webpack', 'windows']
desc: "Fix “Module parse failed: Bad character escape sequence” in Next.js. Learn why it happens, how Windows paths break Webpack, and how to apply reliable fixes."
---

# Fixing “Module parse failed: Bad character escape sequence” in Next.js

This error occurs frequently on **Windows**, especially in **Next.js 14–15**, and is caused by how Webpack parses file paths containing backslashes (`\\`). These backslashes get interpreted as escape sequences, leading to invalid JavaScript deep inside Next.js loaders.

Below is an improved, expanded, and more complete guide with additional solutions and explanations.

## The Error

```
Module parse failed: Bad character escape sequence
```

In the logs:

```
throw new Error('File size for Open Graph image "C:\\Users\\test\\project\\src\\app\\favicon.ico" exceeds 8MB.')
```

Webpack interprets sequences like `\U`, `\t`, `\p` as escape characters, causing syntax errors.

---

# Why This Happens

Windows paths:

```
C:\Users\myUser\project
```

Webpack expects paths to be:

```
C:/Users/myUser/project
```

or properly escaped:

```
C:\\Users\\myUser\\project
```

When a loader (like **next-metadata-route-loader**) inserts an unescaped Windows path into a JavaScript string literal, Webpack fails.

---

# 1. Remove or Replace favicon.ico

Many developers confirmed that `src/app/favicon.ico` being processed by Next.js metadata loader caused the crash.

Try:

```
rm src/app/favicon.ico
```

Restart:

```
npm run dev
```

Then later place a favicon into `/public/favicon.ico`.

---

# 2. Clear the `.next` Cache

The metadata cache often contains incorrectly escaped paths.

```
npx rimraf .next
npm run dev
```

This alone fixes the issue for many.

---

# 3. Normalize Windows Paths Manually

If your code or config generates paths, normalize them:

```js
function fixPath(p) {
  return p.replace(/\\/g, '/');
}
```

Use this when passing paths to loaders or Webpack configuration.

---

# 4. Patch or Adjust Webpack Configuration

If a loader emits raw Windows paths, you can override handling:

```js
module.exports = {
  webpack(config) {
    config.module.rules.push({
      test: /\.ico$/,
      type: 'asset/resource',
    });
    return config;
  }
};
```

Disable verbose path info:

```js
config.output.pathinfo = false;
```

This prevents Webpack from inserting unescaped paths into comments.

---

# 5. Temporarily Disable Metadata Route Processing

You can bypass the problematic loader:

```js
export const dynamic = "force-static";
export const metadata = {};
```

If the error disappears, the issue is tied to metadata image handling.

---

# 6. Ensure Files Are UTF‑8 Encoded

Incorrect encodings can produce malformed byte sequences Webpack cannot parse.

---

# 7. Upgrade Next.js + Webpack

Many Windows path-escaping bugs were fixed after:

```
npm install next@latest
npm install webpack@latest
```

Next.js 15 includes improved Windows support.

---

# 8. Patch the Broken Loader (Permanent Fix)

If the issue is inside Next.js internals, patch the loader:

```
npm install patch-package
```

Modify:

```
node_modules/next/dist/build/webpack/loaders/next-metadata-route-loader.js
```

Change:

```js
"..." + filePath + "..."
```

to:

```js
"..." + filePath.replace(/\\/g, "\\\\") + "..."
```

Then save a patch:

```
npx patch-package next
```

This ensures every backslash is escaped properly.

---

# Summary

| Cause | Fix |
|-------|-----|
| Windows backslashes parsed incorrectly | Normalize paths, escape backslashes |
| next-metadata-route-loader bug | Upgrade or patch loader |
| Corrupted or problematic favicon.ico | Remove or replace |
| Cached metadata breaking build | Clear `.next` |
| Misbehaving loader or plugin | Override with config |