---
import ConfigPanel from './config-panel.astro';
import OutputPanel from './output-panel.astro';
import PreviewPanel from './preview-panel.astro';

const { title, description } = Astro.props;
---

<div class='iframe-generator'>
  <div class='generator-layout'>
    <aside class='config-section'>
      <ConfigPanel />
    </aside>

    <main class='main-section'>
      <PreviewPanel />
      <OutputPanel />
    </main>
  </div>
</div>

<script>
  import { IframeGeneratorController } from '../lib/iframe-controller';

  document.addEventListener('DOMContentLoaded', () => {
    new IframeGeneratorController();
  });
</script>

<style>
  .iframe-generator {
    margin-top: 2.5rem;
  }

  .generator-layout {
    display: grid;
    grid-template-columns: 380px 1fr;
    gap: 2rem;
    min-height: 600px;
  }

  .config-section {
    background: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
    overflow: hidden;
    height: fit-content;
    position: sticky;
    top: 2rem;
    max-height: calc(100vh - 4rem);
    overflow-y: auto;
  }

  .main-section {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  @media (max-width: 1024px) {
    .generator-layout {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .config-section {
      position: relative;
      top: 0;
      max-height: none;
    }
  }

  @media (max-width: 768px) {
    .generator-layout {
      gap: 1rem;
    }
  }
</style>
